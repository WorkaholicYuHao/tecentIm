{"remainingRequest":"/Users/yuhao/TIMSDK/H5/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuhao/TIMSDK/H5/src/components/group-live/components/live-header.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuhao/TIMSDK/H5/src/components/group-live/components/live-header.vue","mtime":1616982605599},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from 'vuex'\n export default {\n   name: 'liveHeader',\n   props: {\n     fr: {\n       type: String,\n       requred: true\n     },\n     isPushingStream: {\n       type: Boolean,\n       default: false\n     },\n     stopPushStream: {\n       type: Function\n     },\n     pusherTime: {\n       type: String,\n       default: ''\n     }\n   },\n   data() {\n     return {\n       nick: '',\n       avatar: 'https://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-2.png',\n       onlineMemberCount: 0,\n       timer: null,\n       onlineList: []\n     }\n   },\n   computed: {\n     ...mapState({\n       groupLiveInfo: state => state.groupLive.groupLiveInfo\n     }),\n     showLiveInfo() {\n       return (this.fr === 'pusher' && this.isPushingStream) || this.fr === 'player'\n     },\n     roomName() {\n       return this.groupLiveInfo.roomName || `${this.groupLiveInfo.anchorID}的直播`\n     }\n   },\n   mounted() {\n     this.getAnchorProfile()\n     if (this.fr === 'player') {\n       this.timer = setInterval(() => {\n         this.getGroupOnlineMemberCount()\n       }, 5000)\n     }\n   },\n   beforeDestroy() {\n     this.timer && clearInterval(this.timer)\n   },\n   methods: {\n     closeLiveMask() {\n       if (this.fr === 'pusher') {\n         this.stopPushStream()\n         return\n       }\n       this.$store.commit('updateGroupLiveInfo', { isNeededQuitRoom: 1 })\n       this.$bus.$emit('close-group-live')\n     },\n     async getAnchorProfile() {\n       const res = await this.tim.getUserProfile({userIDList: [this.groupLiveInfo.anchorID]})\n       if (res.code === 0) {\n         this.nick = res.data[0].nick || res.data[0].userID\n         this.avatar = res.data[0].avatar || 'https://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-2.png'\n       }\n     },\n     async getGroupOnlineMemberCount() {\n       const res = await this.tim.getGroupOnlineMemberCount(this.groupLiveInfo.roomID)\n       if (res.code === 0 && res.data) {\n         this.onlineMemberCount = res.data.memberCount\n       }\n     }\n   },\n   watch: {\n     isPushingStream: function(val) {\n       if (val && this.fr === 'pusher') {\n         this.timer = setInterval(() => {\n           this.getGroupOnlineMemberCount()\n         }, 5000)\n       }\n     }\n   }\n }\n",null]}
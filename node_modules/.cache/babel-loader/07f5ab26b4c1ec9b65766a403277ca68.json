{"remainingRequest":"/Users/yuhao/TIMSDK/H5/node_modules/babel-loader/lib/index.js!/Users/yuhao/TIMSDK/H5/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuhao/TIMSDK/H5/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuhao/TIMSDK/H5/src/components/message/message-elements/custom-element.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuhao/TIMSDK/H5/src/components/message/message-elements/custom-element.vue","mtime":1616982605602},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport _defineProperty from \"/Users/yuhao/TIMSDK/H5/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Rate2 from \"element-ui/lib/theme-chalk/rate.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Rate from \"element-ui/lib/rate\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nimport MessageBubble from \"../message-bubble\";\nimport MessageGroupLiveStatus from \"../message-group-live-status\";\nexport default {\n  name: 'CustomElement',\n  props: {\n    payload: {\n      type: Object,\n      required: true\n    },\n    message: {\n      type: Object,\n      required: true\n    },\n    isMine: {\n      type: Boolean\n    }\n  },\n  components: {\n    MessageBubble: MessageBubble,\n    ElRate: _Rate,\n    MessageGroupLiveStatus: MessageGroupLiveStatus\n  },\n  computed: _objectSpread(_objectSpread({}, mapState({\n    currentUserProfile: function currentUserProfile(state) {\n      return state.user.currentUserProfile;\n    }\n  })), {}, {\n    text: function text() {\n      return this.translateCustomMessage(this.payload);\n    },\n    rate: function rate() {\n      return parseInt(this.payload.description);\n    }\n  }),\n  methods: {\n    translateCustomMessage: function translateCustomMessage(payload) {\n      var videoPayload = {};\n\n      try {\n        videoPayload = JSON.parse(payload.data);\n      } catch (e) {\n        videoPayload = {};\n      }\n\n      if (payload.data === 'group_create') {\n        return \"\".concat(payload.extension);\n      }\n\n      if (videoPayload.roomId) {\n        videoPayload.roomId = videoPayload.roomId.toString();\n        videoPayload.isFromGroupLive = 1;\n        return videoPayload;\n      }\n\n      if (payload.text) {\n        return payload.text;\n      } else {\n        return '[自定义消息]';\n      }\n    }\n  }\n};",{"version":3,"sources":["custom-element.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,SAAA,QAAA,QAAA,MAAA;AACA,OAAA,aAAA;AAEA,OAAA,sBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KALA;AASA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AATA,GAFA;AAeA,EAAA,UAAA,EAAA;AACA,IAAA,aAAA,EAAA,aADA;AAEA,IAAA,MAAA,OAFA;AAGA,IAAA,sBAAA,EAAA;AAHA,GAfA;AAoBA,EAAA,QAAA,kCACA,QAAA,CAAA;AACA,IAAA,kBAAA,EAAA,4BAAA,KAAA;AAAA,aAAA,KAAA,CAAA,IAAA,CAAA,kBAAA;AAAA;AADA,GAAA,CADA;AAIA,IAAA,IAJA,kBAIA;AACA,aAAA,KAAA,sBAAA,CAAA,KAAA,OAAA,CAAA;AACA,KANA;AAOA,IAAA,IAPA,kBAOA;AACA,aAAA,QAAA,CAAA,KAAA,OAAA,CAAA,WAAA,CAAA;AACA;AATA,IApBA;AA+BA,EAAA,OAAA,EAAA;AACA,IAAA,sBADA,kCACA,OADA,EACA;AACA,UAAA,YAAA,GAAA,EAAA;;AACA,UAAA;AACA,QAAA,YAAA,GAAA,IAAA,CAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,OAFA,CAEA,OAAA,CAAA,EAAA;AACA,QAAA,YAAA,GAAA,EAAA;AACA;;AACA,UAAA,OAAA,CAAA,IAAA,KAAA,cAAA,EAAA;AACA,yBAAA,OAAA,CAAA,SAAA;AACA;;AACA,UAAA,YAAA,CAAA,MAAA,EAAA;AACA,QAAA,YAAA,CAAA,MAAA,GAAA,YAAA,CAAA,MAAA,CAAA,QAAA,EAAA;AACA,QAAA,YAAA,CAAA,eAAA,GAAA,CAAA;AACA,eAAA,YAAA;AACA;;AACA,UAAA,OAAA,CAAA,IAAA,EAAA;AACA,eAAA,OAAA,CAAA,IAAA;AACA,OAFA,MAEA;AACA,eAAA,SAAA;AACA;AACA;AArBA;AA/BA,CAAA","sourcesContent":["<template>\n<message-bubble :isMine=isMine :message=message>\n  <div class=\"custom-element-wrapper\">\n    <div class=\"survey\"  v-if=\"this.payload.data === 'survey'\">\n      <div class=\"title\">对IM DEMO的评分和建议</div>\n      <el-rate\n          v-model=\"rate\"\n          disabled\n          show-score\n          text-color=\"#ff9900\"\n          score-template=\"{value}\">\n      </el-rate>\n      <div class=\"suggestion\">{{this.payload.extension}}</div>\n    </div>\n    <span class=\"text\" title=\"您可以自行解析自定义消息\" v-else>\n      <template v-if=\"text.isFromGroupLive && text.isFromGroupLive === 1\">\n        <message-group-live-status :liveInfo='text' />\n      </template>\n      <template v-else>{{text}}</template>\n    </span>\n  </div>\n</message-bubble>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport MessageBubble from '../message-bubble'\nimport { Rate } from 'element-ui'\nimport MessageGroupLiveStatus from '../message-group-live-status'\n\nexport default {\n  name: 'CustomElement',\n  props: {\n    payload: {\n      type: Object,\n      required: true\n    },\n    message: {\n      type: Object,\n      required: true\n    },\n    isMine: {\n      type: Boolean\n    }\n  },\n  components: {\n    MessageBubble,\n    ElRate: Rate,\n    MessageGroupLiveStatus\n  },\n  computed: {\n    ...mapState({\n      currentUserProfile: state => state.user.currentUserProfile\n    }),\n    text() {\n      return this.translateCustomMessage(this.payload)\n    },\n    rate() {\n      return parseInt(this.payload.description)\n    }\n  },\n  methods: {\n    translateCustomMessage(payload) {\n      let videoPayload = {}\n      try{\n        videoPayload = JSON.parse(payload.data)\n      } catch(e) {\n        videoPayload = {}\n      }\n      if (payload.data === 'group_create') {\n        return `${payload.extension}`\n      }\n      if (videoPayload.roomId) {\n        videoPayload.roomId = videoPayload.roomId.toString()\n        videoPayload.isFromGroupLive = 1\n        return videoPayload\n      }\n      if(payload.text) {\n        return payload.text\n      }else{\n        return '[自定义消息]'\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.text\n  font-weight bold\n.title\n  font-size 16px\n  font-weight 600\n  padding-bottom 10px\n.survey\n  background-color white\n  color black\n  padding 20px\n  display flex\n  flex-direction column\n.suggestion\n  padding-top 10px\n  font-size 14px\n</style>\n"],"sourceRoot":"src/components/message/message-elements"}]}
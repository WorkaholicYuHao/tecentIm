{"remainingRequest":"/Users/yuhao/TIMSDK/H5/node_modules/thread-loader/dist/cjs.js!/Users/yuhao/TIMSDK/H5/node_modules/babel-loader/lib/index.js!/Users/yuhao/TIMSDK/H5/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuhao/TIMSDK/H5/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuhao/TIMSDK/H5/src/components/conversation/conversationProfile/group-profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuhao/TIMSDK/H5/src/components/conversation/conversationProfile/group-profile.vue","mtime":1616982605598},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhao/TIMSDK/H5/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.function.name\";\nimport _Switch2 from \"element-ui/lib/theme-chalk/switch.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Switch from \"element-ui/lib/switch\";\nimport _Option2 from \"element-ui/lib/theme-chalk/option.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Option from \"element-ui/lib/option\";\nimport _Select2 from \"element-ui/lib/theme-chalk/select.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Select from \"element-ui/lib/select\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport GroupMemberList from \"./group-member-list.vue\";\nexport default {\n  props: ['groupProfile'],\n  components: {\n    GroupMemberList: GroupMemberList,\n    ElSelect: _Select,\n    ElOption: _Option,\n    ElSwitch: _Switch\n  },\n  data: function data() {\n    return {\n      showEditName: false,\n      showEditFaceUrl: false,\n      showEditIntroduction: false,\n      showEditNotification: false,\n      showEditJoinOption: false,\n      showChangeGroupOwner: false,\n      showEditMessageRemindType: false,\n      showEditNameCard: false,\n      name: this.groupProfile.name,\n      avatar: this.groupProfile.avatar,\n      introduction: this.groupProfile.introduction,\n      notification: this.groupProfile.notification,\n      joinOption: this.groupProfile.joinOption,\n      newOwnerUserID: '',\n      messageRemindType: this.groupProfile.selfInfo.messageRemindType,\n      nameCard: this.groupProfile.selfInfo.nameCard || '',\n      muteAllMembers: this.groupProfile.muteAllMembers,\n      messageRemindTypeMap: {\n        AcceptAndNotify: '接收消息并提示',\n        AcceptNotNotify: '接收消息但不提示',\n        Discard: '屏蔽消息'\n      },\n      joinOptionMap: {\n        FreeAccess: '自由加入',\n        NeedPermission: '需要验证',\n        DisableApply: '禁止加群'\n      },\n      active: false\n    };\n  },\n  computed: {\n    editable: function editable() {\n      return this.groupProfile.type === this.TIM.TYPES.GRP_WORK || [this.TIM.TYPES.GRP_MBR_ROLE_OWNER, this.TIM.TYPES.GRP_MBR_ROLE_ADMIN].includes(this.groupProfile.selfInfo.role);\n    },\n    isOwner: function isOwner() {\n      return this.groupProfile.selfInfo.role === this.TIM.TYPES.GRP_MBR_ROLE_OWNER;\n    },\n    isAdmin: function isAdmin() {\n      return this.groupProfile.selfInfo.role === this.TIM.TYPES.GRP_MBR_ROLE_ADMIN;\n    },\n    showDissmissGroup: function showDissmissGroup() {\n      // 好友工作群不能解散\n      return this.isOwner && this.groupProfile.type !== this.TIM.TYPES.GRP_WORK;\n    },\n    groupType: function groupType() {\n      switch (this.groupProfile.type) {\n        case this.TIM.TYPES.GRP_WORK:\n          return '好友工作群（Work）';\n\n        case this.TIM.TYPES.GRP_PUBLIC:\n          return '陌生人社交群（Public）';\n\n        case this.TIM.TYPES.GRP_CHATROOM:\n          return '临时会议群（Meeting）';\n\n        case this.TIM.TYPES.GRP_AVCHATROOM:\n          return '直播群（AVChatRoom）';\n\n        default:\n          return '';\n      }\n    }\n  },\n  watch: {\n    groupProfile: function groupProfile(_groupProfile) {\n      Object.assign(this, {\n        showEditName: false,\n        showEditFaceUrl: false,\n        showEditIntroduction: false,\n        showEditNotification: false,\n        showEditJoinOption: false,\n        showChangeGroupOwner: false,\n        showEditNameCard: false,\n        name: _groupProfile.name,\n        avatar: _groupProfile.avatar,\n        introduction: _groupProfile.introduction,\n        notification: _groupProfile.notification,\n        joinOption: _groupProfile.joinOption,\n        messageRemindType: _groupProfile.messageRemindType,\n        nameCard: _groupProfile.selfInfo.nameCard || '',\n        muteAllMembers: _groupProfile.muteAllMembers\n      });\n    }\n  },\n  methods: {\n    inputFocus: function inputFocus(ref) {\n      var _this = this;\n\n      this.$nextTick(function () {\n        _this.$refs[ref].focus();\n      });\n    },\n    editName: function editName() {\n      var _this2 = this;\n\n      this.tim.updateGroupProfile({\n        groupID: this.groupProfile.groupID,\n        name: this.name.trim()\n      }).then(function () {\n        _this2.showEditName = false;\n      }).catch(function (error) {\n        _this2.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    editFaceUrl: function editFaceUrl() {\n      var _this3 = this;\n\n      this.tim.updateGroupProfile({\n        groupID: this.groupProfile.groupID,\n        avatar: this.avatar.trim()\n      }).then(function () {\n        _this3.showEditFaceUrl = false;\n      }).catch(function (error) {\n        _this3.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    changeMuteStatus: function changeMuteStatus() {\n      var _this4 = this;\n\n      if (this.isOwner || this.isAdmin) {\n        this.tim.updateGroupProfile({\n          muteAllMembers: this.muteAllMembers,\n          groupID: this.groupProfile.groupID\n        }).then(function (imResponse) {\n          _this4.muteAllMembers = imResponse.data.group.muteAllMembers;\n\n          if (_this4.muteAllMembers) {\n            _this4.active = true;\n\n            _this4.$store.commit('showMessage', {\n              message: '全体禁言'\n            });\n          } else {\n            _this4.active = false;\n\n            _this4.$store.commit('showMessage', {\n              message: '取消全体禁言'\n            });\n          }\n        }).catch(function (error) {\n          _this4.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          });\n        });\n      } else {\n        this.muteAllMembers = this.groupProfile.muteAllMembers;\n        this.$store.commit('showMessage', {\n          type: 'error',\n          message: '普通群成员不能对全体禁言'\n        });\n      }\n    },\n    editIntroduction: function editIntroduction() {\n      var _this5 = this;\n\n      this.tim.updateGroupProfile({\n        groupID: this.groupProfile.groupID,\n        introduction: this.introduction.trim()\n      }).then(function () {\n        _this5.showEditIntroduction = false;\n      }).catch(function (error) {\n        _this5.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    editNotification: function editNotification() {\n      var _this6 = this;\n\n      this.tim.updateGroupProfile({\n        groupID: this.groupProfile.groupID,\n        notification: this.notification.trim()\n      }).then(function () {\n        _this6.showEditNotification = false;\n      }).catch(function (error) {\n        _this6.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    editJoinOption: function editJoinOption() {\n      var _this7 = this;\n\n      this.tim.updateGroupProfile({\n        groupID: this.groupProfile.groupID,\n        joinOption: this.joinOption\n      }).then(function () {\n        _this7.showEditJoinOption = false;\n      }).catch(function (error) {\n        _this7.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    changeOwner: function changeOwner() {\n      var _this8 = this;\n\n      this.tim.changeGroupOwner({\n        groupID: this.groupProfile.groupID,\n        newOwnerID: this.newOwnerUserID\n      }).then(function () {\n        _this8.showChangeGroupOwner = false;\n\n        _this8.$store.commit('showMessage', {\n          message: \"\\u8F6C\\u8BA9\\u7FA4\\u4E3B\\u6210\\u529F\\uFF0C\\u65B0\\u7FA4\\u4E3BID\\uFF1A\".concat(_this8.newOwnerUserID)\n        });\n\n        _this8.newOwnerUserID = '';\n      }).catch(function (error) {\n        _this8.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    quitGroup: function quitGroup() {\n      var _this9 = this;\n\n      this.tim.quitGroup(this.groupProfile.groupID).then(function (_ref) {\n        var groupID = _ref.data.groupID;\n\n        _this9.$store.commit('showMessage', {\n          message: '退群成功'\n        });\n\n        if (groupID === _this9.groupProfile.groupID) {\n          _this9.$store.commit('resetCurrentConversation');\n        }\n      }).catch(function (error) {\n        _this9.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    dismissGroup: function dismissGroup() {\n      var _this10 = this;\n\n      this.tim.dismissGroup(this.groupProfile.groupID).then(function (_ref2) {\n        var groupID = _ref2.data.groupID;\n\n        _this10.$store.commit('showMessage', {\n          message: \"\\u7FA4\\uFF1A\".concat(_this10.groupProfile.name || _this10.groupProfile.groupID, \"\\u89E3\\u6563\\u6210\\u529F\\uFF01\"),\n          type: 'success'\n        });\n\n        if (groupID === _this10.groupProfile.groupID) {\n          _this10.$store.commit('resetCurrentConversation');\n        }\n      }).catch(function (error) {\n        _this10.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    editMessageRemindType: function editMessageRemindType() {\n      var _this11 = this;\n\n      this.tim.setMessageRemindType({\n        groupID: this.groupProfile.groupID,\n        messageRemindType: this.messageRemindType\n      }).then(function () {\n        _this11.showEditMessageRemindType = false;\n      }).catch(function (error) {\n        _this11.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    editNameCard: function editNameCard() {\n      var _this12 = this;\n\n      if (this.nameCard.trim().length === 0) {\n        this.$store.commit('showMessage', {\n          message: '不能设置空的群名片',\n          type: 'warning'\n        });\n        return;\n      }\n\n      this.tim.setGroupMemberNameCard({\n        groupID: this.groupProfile.groupID,\n        nameCard: this.nameCard.trim()\n      }).then(function () {\n        _this12.showEditNameCard = false;\n      }).catch(function (error) {\n        _this12.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    }\n  }\n};",null]}